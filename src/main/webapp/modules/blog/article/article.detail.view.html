<!--container-fluid-->
<div class="customContainer">
    <!--<ng-include src="'modules/common/top-nav.html'"></ng-include>-->
    <ng-include src="'modules/common/loading.html'"></ng-include>
    <div ng-show="loaded" class="body-content-body">
        <div class="article">
            <div ng-show="error">{{errorMessage}}</div>
            <div ng-show="!error">
                <div class="article-header row">
                    <div class="col-sm-12" style="padding:0;text-align: left;margin-bottom: 5px;">
                        <h2>{{article.title}}</h2>
                    </div>
                </div>
                <div class="article-body">
                    <div class="row">
                        <div class="col-sm-12 summary">
                            <div class="row">
                                <span class="glyphicon glyphicon-th-list"></span>
                            <a style="" href="#/blog/category/{{article.categoryName}}">{{article.categoryName}}</a>
                            <span ng-if="article.tagNames" class="glyphicon glyphicon-tags  hidden-sm hidden-xs"></span>
                            <span ng-repeat="tName in article.tagNames" class="hidden-sm hidden-xs">
                                <a href="#/blog/tag/{{tName}}">
                                    <span> {{tName}} </span>
                                </a>
							</span>
                            <span class="pull-right">
                                <span class="glyphicon glyphicon-time" style="padding-top: 3px;" ></span>
                                <a style="font-family: '微软雅黑'" title="归档：{{article.pubTime | date :'yyyy-MM'}}"  href="#/blog/archive/{{article.pubTime | date :'yyyy-MM'}}">
                                {{article.pubTime | date :'yyyy-MM-dd HH:ss'}}</a>
                            </div>
                            </span>
                        </div>
                        <!--<div class="col-sm-12 summary">

                            <div class="row">
                                <div class="col-md-6" style="padding:0;">
                                    <span style="font-family: '楷体'">类别：</span> <span><a
                                        style="text-decoration: underline;"
                                        href="#/blog/category/{{article.categoryName}}">{{article.categoryName}}</a></span>
                                </div>
                                <div class="col-md-6" style="padding:0;">
                                    <span style="font-family: '楷体'">标签：</span> <span
                                        ng-repeat="tName in article.tagNames"> <a
                                        href="#/blog/tag/{{tName}}"><span
                                        style="text-decoration: underline;" class="tag">
												{{tName}} </span></a>
									</span>
                                </div>
                                <div class="col-sm-12" style="margin-bottom: 0px;padding:0;">
                                    <p style="font-family: '楷体';margin-bottom: 0px">摘要：</p>

                                    <p style="text-indent: 30px;margin-bottom: 0px">{{article.summary}}</p>

                                    <p style="text-align:right;font-family: '楷体';margin-bottom: 0px">
                                        发表于 <a style="text-decoration: underline;"
                                               title="归档：{{article.pubTime | date :'yyyy-MM'}}"
                                               href="#/blog/archive/{{article.pubTime | date :'yyyy-MM'}}">{{article.pubTime
                                        | date :'yyyy-MM-dd HH:ss'}}</a>
                                    </p>
                                </div>
                            </div>
                        </div>-->
                        <div class="col-sm-12 content">
                            <div ng-bind-html="article.content | trusted"></div>
                        </div>
                        <!--<div class="col-sm-12" style="padding:0;">
                            <div class="col-sm-12 pre">
                                <a ng-if="preArticle" href="#/blog/article/{{preArticle.title}}"><span>上一篇：</span>{{preArticle.title}}</a>
                                <span ng-if="!preArticle"><span>上一篇：</span>没有了...</span>
                            </div>
                            <div class="col-sm-12 next">
                                <a ng-if="nextArticle"
                                   href="#/blog/article/{{nextArticle.title}}"><span>下一篇：</span>{{nextArticle.title}}</a>
                                <span ng-if="!nextArticle"><span>下一篇：</span>没有了...</span>
                            </div>
                        </div>-->
                        <div class="row">
                            <span style="float: left;">标签：</span><span ng-repeat="tName in article.tagNames" class="visible-sm visible-xs" style="float: left">
                                <span ng-if="article.tagNames" class="glyphicon glyphicon-tag"></span>
                                <a href="#/blog/tag/{{tName}}">
                                    <span> {{tName}} </span>
                                </a>&nbsp;
							</span>
                        </div>
                    </div>
                </div>
                <div class="article-footer">
                    <div class="row">

                        <div class="col-xs-12 message-body" style="margin: 0;">
                            <h3 id="message-body-top" style="padding-bottom: 10px;border-bottom: 2px silver solid;">
                                <span class="glyphicon btn-lg glyphicon-comment"
                                      style="padding: 3px 6px;"></span>留言<span style="color: #7E7E7E;font-size: 14px;"
                                                                               ng-if="messages">（{{messages.length}}条）</span>
                            </h3>

                            <p style="color: #7E7E7E;">注意：请慎重投出你的支持票，谢谢配合！^_^</p>

                            <div class="message-card" ng-repeat="msg in messages">
                                <span style="background-color: #52768E;padding: 8px 15px;height: 36px;line-height: 36px;color: #fff;text-shadow: 5px 5px 5px #3f5b6e;">
                                    <a ng-if="msg.guestWebsite" href="http://{{msg.guestWebsite}}" target="_blank"><span
                                            style="color:#fff;text-decoration: underline;">{{msg.guestNickname}}</span></a>
                                    <span ng-if="!msg.guestWebsite">{{msg.guestNickname}}</span>
                                </span>
                                <span class="pull-right" style="padding-right: 10px;">
                                    <span style="line-height: 32px;">{{msg.messageSupportCount}}</span>
                                    <a href="javascript:void(0)" style="margin-left:10px;" title="支持数"><span
                                            class="glyphicon btn-lg glyphicon-thumbs-up pull-right"
                                            style="padding: 2px 0 0 0;"></span></a>
                                </span>

                                <div style="padding: 10px 15px 5px 15px;">
                                    <div ng-bind-html="msg.messageContent | trusted"></div>
                                </div>
                                <p class=""
                                   style="color:#B9B9B9;margin:0 10px 4px 0;font-size: 10px;text-align: right;">发表于
                                    {{msg.messagePubTime | date:'yyyy-MM-dd HH:mm'}}</p>
                            </div>
                        </div>
                        <div class="col-xs-12 message-header">
                            <h4 style="padding-bottom: 10px;border-bottom: 1px silver solid;margin-bottom: 0">
                                发表您的看法</h4>

                            <form class="form-horizontal" name="messageForm" ng-submit="comment(messageForm.$valid)"
                                  novalidate>
                                <div class="form-group">
                                    <div class="row">
                                        <label>邮箱</label><span style="padding-left:20px;font-size: 12px;color:green;"
                                                               ng-bind="emailValidInfo"></span>

                                        <div><input placeholder="必填，放心我不会公开也不会发送广告" class="form-control" type="email"
                                                    name="email" ng-model="guest.email"
                                                    ng-blur="getGuestInfoByEmail(guest.email)" required/></div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <label>昵称</label><span style="padding-left:20px;font-size: 12px;color:green;"
                                                               ng-bind="nicknameValidInfo"></span>

                                        <div><input placeholder="必填，您的大名" class="form-control" type="text"
                                                    ng-blur="getGuestInfoByNickname(guest.email,guest.nickname)"
                                                    ng-disabled="!guest.email" name="nickname" ng-model="guest.nickname"
                                                    type="text" required/>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <label>个人网址</label>

                                        <div><input placeholder="希望我们能够互相信任 ^_^" class="form-control"
                                                    ng-disabled="!guest.email" name="personalWebsite"
                                                    ng-model="guest.personalWebsite" type="text"/></div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>观点</label><span style="padding-left:20px;font-size: 12px;color:green;"
                                                           ng-bind="contentValidInfo"></span>

                                    <div class="col-sm-12">
                                        <div id="message-editormd"
                                             style="margin-bottom: 0;width:100%;border-color: silver;">
                                        <textarea class="editormd-markdown-textarea"
                                                  name="$id-markdown-doc"></textarea>
                                            <!-- html textarea 需要开启配置项 saveHTMLToTextarea == true -->
                                        <textarea class="editormd-html-textarea"
                                                  name="$id-html-code"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <button type="submit" ng-disabled="messageForm.$invalid" class="btn btn-primary"
                                        style="width: 100px;margin-top: 10px;">提 交
                                </button>
                                <span style="line-height: 36px;color:green" ng-bind="resultMessage"></span>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
    .editormd {
        padding-top: 6px;
    }

    /*    .CodeMirror, .cm-s-default, .CodeMirror-wrap, .CodeMirror-empty{
            width: 100%;
        }*/
</style>
<script>
    /*    var messageEditor;

     $(function () {
     messageEditor = editormd("message-editormd", {
     width: "100%",
     height: 180,
     watch:false,
     path: web_project_name + "/plugins/editor.md/lib/",
     toolbarIcons: function () {
     return editormd.toolbarModes["mini"];
     },
     toolbar  : false,             //关闭工具栏
     saveHTMLToTextarea: true,
     lineNumbers:false,
     styleSelectedText:false,
     styleActiveLine:false,
     autoFocus:false,
     toolbarAutoFixed:false
     });
     });*/
</script>
